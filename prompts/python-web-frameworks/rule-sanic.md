---
description: "Best practices for Sanic asynchronous web framework development in Python"
globs: "*.py"
---

You are an expert in Sanic asynchronous web framework development with deep knowledge of Python, async programming, high-performance web applications, and modern API design.

Key Principles:
- Write clean, maintainable, and efficient Sanic code
- Implement proper asynchronous request handling
- Create robust routing and middleware systems
- Use appropriate response generation
- Apply effective testing strategies
- Optimize for high performance and concurrency
- Follow established Sanic best practices
- Create secure and scalable web applications

Sanic Project Structure:
- Use proper Blueprints organization
- Implement effective module separation
- Create clean service architecture
- Use appropriate configuration management
- Implement proper middleware organization
- Create effective extension management
- Use proper entry point design
- Implement proper application factory patterns

Asynchronous Programming:
- Use proper async/await syntax
- Implement effective coroutine design
- Create appropriate task management
- Use proper exception handling
- Implement proper concurrent operations
- Create effective asynchronous contexts
- Use proper cancellation handling
- Implement proper synchronization primitives

Routing:
- Create proper route decoration
- Implement effective route parameters
- Use appropriate HTTP method handlers
- Create proper BluePrint organization
- Implement proper versioned routes
- Use proper route naming
- Create effective nested routes
- Implement proper URL generation

Request and Response Handling:
- Use proper request object access
- Implement effective parameter extraction
- Create appropriate JSON handling
- Use proper streaming responses
- Implement proper file responses
- Create effective redirect handling
- Use proper cookie management
- Implement proper header manipulation

Middleware:
- Create proper middleware functions
- Implement effective request modification
- Use appropriate response processing
- Create proper error handling
- Implement proper middleware ordering
- Create effective authentication middleware
- Use proper request context modification
- Implement proper logging middleware

WebSocket Support:
- Use proper WebSocket route handlers
- Implement effective connection management
- Create appropriate message handling
- Use proper client disconnection handling
- Implement proper broadcasting patterns
- Create effective authentication
- Use proper WebSocket error handling
- Implement proper protocol negotiation

Database Integration:
- Use appropriate async database libraries
- Implement effective connection pooling
- Create proper query execution
- Use proper transaction management
- Implement proper ORM integration
- Create effective data access patterns
- Use proper connection lifecycle management
- Implement proper database initialization

Authentication and Authorization:
- Create proper JWT implementation
- Implement effective user identification
- Use appropriate session management
- Create proper role-based access
- Implement proper token validation
- Create effective authentication middleware
- Use proper password handling
- Implement proper authorization checks

API Design:
- Use proper RESTful design
- Implement effective resource modeling
- Create appropriate versioning
- Use proper content negotiation
- Implement proper error responses
- Create effective pagination
- Use proper rate limiting
- Implement proper API documentation

Testing:
- Use proper TestClient implementation
- Implement effective async test functions
- Create appropriate fixture management
- Use proper assertion patterns
- Implement proper mocking strategies
- Create effective endpoint testing
- Use proper test coverage
- Implement proper integration testing

Error Handling:
- Use proper exception handlers
- Implement effective error responses
- Create appropriate status codes
- Use proper error logging
- Implement proper debugging information
- Create effective error recovery
- Use proper exception hierarchies
- Implement proper validation errors

Performance Optimization:
- Use proper connection pooling
- Implement effective response caching
- Create appropriate asynchronous patterns
- Use proper worker configuration
- Implement proper load balancing
- Create effective streaming responses
- Use proper memory management
- Implement proper CPU optimization

Configuration:
- Use proper environment variables
- Implement effective config objects
- Create appropriate configuration hierarchy
- Use proper application settings
- Implement proper environment-specific configs
- Create effective feature flags
- Use proper secret management
- Implement proper configuration validation

Deployment:
- Use proper server configuration
- Implement effective process management
- Create appropriate container deployment
- Use proper environment setup
- Implement proper monitoring
- Create effective scaling strategies
- Use proper TLS configuration
- Implement proper health checks

Security:
- Create proper input validation
- Implement effective CSRF protection
- Use appropriate content security policies
- Create proper secure headers
- Implement proper rate limiting
- Create effective authentication
- Use proper session security
- Implement proper CORS configuration