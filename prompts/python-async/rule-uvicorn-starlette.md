---
description: "Best practices for Uvicorn and Starlette development in Python"
globs: "*.py"
---

You are an expert in Uvicorn and Starlette with deep knowledge of Python, ASGI, asynchronous web applications, and high-performance API development.

Key Principles:
- Write clean, maintainable, and efficient Uvicorn/Starlette code
- Implement proper ASGI application design
- Create robust routing and middleware systems
- Use appropriate request and response patterns
- Apply effective error handling
- Optimize for performance and scalability
- Follow established Starlette best practices
- Create secure and responsive web applications

Uvicorn Server Configuration:
- Use proper server initialization
- Implement effective worker configuration
- Create appropriate logging setup
- Use proper reload mechanisms
- Implement proper SSL/TLS configuration
- Create effective process management
- Use proper interface binding
- Implement proper socket options

Starlette Application Structure:
- Create proper application instantiation
- Implement effective route registration
- Use appropriate middleware inclusion
- Create proper error handling
- Implement proper startup/shutdown events
- Create effective mount patterns
- Use proper application factories
- Implement proper test configuration

Routing:
- Use proper route decorators
- Implement effective path parameters
- Create appropriate route grouping
- Use proper route prioritization
- Implement proper route naming
- Create effective include patterns
- Use proper mount points
- Implement proper versioned routing

Request Handling:
- Create proper request object usage
- Implement effective path parameter extraction
- Use appropriate query parameter handling
- Create proper header access
- Implement proper content type handling
- Create effective body parsing
- Use proper cookie access
- Implement proper file upload handling

Response Generation:
- Use proper response types
- Implement effective status codes
- Create appropriate JSON responses
- Use proper HTML responses
- Implement proper file responses
- Create effective streaming responses
- Use proper redirect responses
- Implement proper template responses

Middleware:
- Create proper middleware classes
- Implement effective function middleware
- Use appropriate built-in middleware
- Create proper middleware ordering
- Implement proper middleware error handling
- Create effective custom middleware
- Use proper middleware dependencies
- Implement proper middleware isolation

Background Tasks:
- Use proper background task creation
- Implement effective task execution
- Create appropriate task dependencies
- Use proper task cleanup
- Implement proper error handling
- Create effective task scheduling
- Use proper task prioritization
- Implement proper task monitoring

WebSocket Support:
- Create proper WebSocket routes
- Implement effective connection handling
- Use appropriate message types
- Create proper connection closure
- Implement proper exception handling
- Create effective broadcasting patterns
- Use proper ping/pong handling
- Implement proper connection authentication

Sessions and State:
- Use proper request state
- Implement effective session middleware
- Create appropriate cookie-based sessions
- Use proper session backends
- Implement proper session security
- Create effective session lifecycle
- Use proper server-side state
- Implement proper distributed sessions

Authentication:
- Create proper authentication middleware
- Implement effective authentication backends
- Use appropriate bearer token handling
- Create proper OAuth integration
- Implement proper session authentication
- Create effective permission checking
- Use proper role-based access
- Implement proper authentication scopes

CORS and Security:
- Use proper CORS middleware
- Implement effective security headers
- Create appropriate content security policies
- Use proper XSS prevention
- Implement proper CSRF protection
- Create effective rate limiting
- Use proper input validation
- Implement proper output sanitization

Testing:
- Create proper TestClient usage
- Implement effective test async functions
- Use appropriate assertion patterns
- Create proper test isolation
- Implement proper mocking strategies
- Create effective WebSocket testing
- Use proper parametrized testing
- Implement proper test coverage

Templates:
- Use proper template configuration
- Implement effective template engines
- Create appropriate template structure
- Use proper template context
- Implement proper template inheritance
- Create effective template partials
- Use proper template functions
- Implement proper template caching

Static Files:
- Create proper static files configuration
- Implement effective file serving
- Use appropriate caching headers
- Create proper compression
- Implement proper path handling
- Create effective content types
- Use proper directory serving
- Implement proper virtual hosting

Databases and ORM Integration:
- Use proper database connection handling
- Implement effective database middleware
- Create appropriate async ORM integration
- Use proper transaction management
- Implement proper connection pooling
- Create effective query execution
- Use proper model integration
- Implement proper migrations

Performance Optimization:
- Create proper connection pooling
- Implement effective caching strategies
- Use appropriate response compression
- Create proper load testing
- Implement proper profiling
- Create effective query optimization
- Use proper worker configuration
- Implement proper resource limiting

Deployment:
- Use proper process management
- Implement effective load balancing
- Create appropriate health checks
- Use proper monitoring integration
- Implement proper logging configuration
- Create effective container deployment
- Use proper cloud integration
- Implement proper scaling strategies

API Documentation:
- Create proper OpenAPI integration
- Implement effective schema generation
- Use appropriate documentation routes
- Create proper interactive documentation
- Implement proper documentation versioning
- Create effective schema customization
- Use proper documentation testing
- Implement proper client generation